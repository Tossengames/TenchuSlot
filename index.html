<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TENCHU: Shadow Mission</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="main-menu" class="screen">
        <h1 class="glitch-title">TENCHU<br>SHADOW MISSION</h1>
        <div class="menu-btns">
            <button onclick="playSnd('click'); startMission()">ACCEPT MISSION</button>
            <button onclick="playSnd('click'); showInstructions()">SCROLL OF TRUTHS</button>
            <button onclick="playSnd('click'); showMissionSelect()">CHOOSE SHINOBI</button>
            <button class="share-btn" onclick="playSnd('click'); shareGame()">SHARE HONOR</button>
            <button class="donate-btn" onclick="playSnd('click'); window.open('https://ko-fi.com/tenchu')">SUPPORT THE CLAN</button>
        </div>
        <div class="rank-display" id="rank-display">
            <div class="rank-name" id="current-rank">Initiate</div>
            <div class="rank-progress">
                <div class="rank-progress-bar" id="rank-progress-bar"></div>
            </div>
        </div>
    </div>

    <div id="mission-select" class="screen hidden">
        <div class="mission-screen">
            <h2 class="mission-title">CHOOSE YOUR SHINOBI</h2>
            
            <div class="mission-character" onclick="selectCharacter('rikimaru')">
                <div class="character-portrait" style="background: #333;"></div>
                <div class="character-info">
                    <div class="character-name">RIKIMARU</div>
                    <div class="character-quote">"The Azure Dragon seeks justice..."</div>
                </div>
            </div>
            
            <div class="mission-character" onclick="selectCharacter('ayame')">
                <div class="character-portrait" style="background: #660000;"></div>
                <div class="character-info">
                    <div class="character-name">AYAME</div>
                    <div class="character-quote">"The Crimson Lily blooms in shadow..."</div>
                </div>
            </div>
            
            <div class="mission-character" onclick="selectCharacter('tatsumaru')">
                <div class="character-portrait" style="background: #006600;"></div>
                <div class="character-info">
                    <div class="character-name">TATSUMARU</div>
                    <div class="character-quote">"The Green Viper strikes unseen..."</div>
                </div>
            </div>
            
            <button onclick="playSnd('click'); startMission()">BEGIN MISSION</button>
            <button class="mini-btn" onclick="playSnd('click'); document.getElementById('mission-select').classList.add('hidden')">BACK</button>
        </div>
    </div>

    <div id="mission-briefing" class="screen hidden">
        <div class="mission-screen">
            <h2 id="briefing-title" class="mission-title">MISSION BRIEFING</h2>
            
            <div id="character-display" class="mission-character">
                <div class="character-portrait" id="character-portrait"></div>
                <div class="character-info">
                    <div class="character-name" id="character-name">RIKIMARU</div>
                    <div class="character-quote" id="character-quote"></div>
                </div>
            </div>
            
            <div class="mission-objective">
                <div class="objective-title">üéØ PRIMARY OBJECTIVE</div>
                <div class="objective-text" id="mission-text"></div>
            </div>
            
            <div class="mission-rewards">
                <div class="reward-item">
                    <div class="reward-icon">üí∞</div>
                    <div id="reward-gold">0 GOLD</div>
                </div>
                <div class="reward-item">
                    <div class="reward-icon">‚≠ê</div>
                    <div id="reward-honor">0 HONOR</div>
                </div>
                <div class="reward-item">
                    <div class="reward-icon">üèÜ</div>
                    <div id="next-rank">NEXT RANK</div>
                </div>
            </div>
            
            <button onclick="playSnd('click'); startGame()">INFILTRATE</button>
            <button class="mini-btn" onclick="playSnd('click'); document.getElementById('mission-briefing').classList.add('hidden')">DECLINE</button>
        </div>
    </div>

    <div id="info-screen" class="screen hidden">
        <div class="mission-screen">
            <h2 class="mission-title">SCROLL OF TRUTHS</h2>
            
            <div class="rules-content">
                <h3>‚öîÔ∏è MISSION PROTOCOL</h3>
                <p><strong>1. INFILTRATION:</strong> Tap SPIN (5 Gold) to begin your mission. This represents gathering intelligence.</p>
                <p><strong>2. STRIKE:</strong> Tap each reel to STOP in sequence. This represents eliminating targets.</p>
                <p><strong>3. VICTORY CONDITIONS:</strong> Match 3 identical symbols in any direction to successfully complete an assassination.</p>
                
                <h3>üéñÔ∏è BOUNTY REWARDS</h3>
                <p><strong>CHARACTER SYMBOLS (Higher Value):</strong></p>
                <ul>
                    <li>ü•∑ Ninja (Rikimaru): 30 Gold</li>
                    <li>üë∫ Oni (Tatsumaru): 25 Gold</li>
                    <li>üèØ Castle Lord: 20 Gold</li>
                </ul>
                
                <p><strong>ITEM SYMBOLS (Standard Value):</strong></p>
                <ul>
                    <li>üó°Ô∏è Kodachi: 15 Gold</li>
                    <li>üèÆ Lantern: 10 Gold</li>
                    <li>üìú Scroll: 8 Gold</li>
                </ul>
                
                <p><strong>üèØ ELITE TARGET:</strong> Castle Lord pays the highest bounty!</p>
                <p><strong>‚ú® MULTI-KILL BONUS:</strong> Multiple matches multiply your rewards by 1.3x!</p>
                
                <h3>üìà RANKING SYSTEM</h3>
                <p>Complete missions to earn Honor Points and rise through the ranks:</p>
                <ul>
                    <li>0-100 Honor: Initiate</li>
                    <li>101-300 Honor: Shinobi</li>
                    <li>301-600 Honor: Assassin</li>
                    <li>601-1000 Honor: Shadow Master</li>
                    <li>1001+ Honor: Grand Master</li>
                </ul>
                
                <h3>üíæ MISSION LOG</h3>
                <p>Your progress, gold, and rank are saved automatically. Each shinobi offers unique missions with special objectives.</p>
                
                <h3>üíÄ DEFEAT</h3>
                <p>Running out of gold means mission failure. Return to base to regroup.</p>
            </div>
            
            <button onclick="playSnd('click'); toggleInfo()">SEAL THE SCROLL</button>
        </div>
    </div>

    <div id="game-view" class="screen hidden">
        <div class="game-header">
            <div class="stat">RY≈å: <span id="coins">50</span></div>
            <div class="title-mini" id="mission-indicator">MISSION ACTIVE</div>
            <div class="stat">HONOR: <span id="honor">0</span></div>
        </div>

        <div class="slot-machine" id="machine">
            <div class="reel" id="reel-0" onclick="stopReel(0)"><div class="strip" id="strip-0"></div></div>
            <div class="reel" id="reel-1" onclick="stopReel(1)"><div class="strip" id="strip-1"></div></div>
            <div class="reel" id="reel-2" onclick="stopReel(2)"><div class="strip" id="strip-2"></div></div>
            
            <div id="result-panel" class="hidden">
                <h2 id="res-type"></h2>
                <h3 id="res-coins"></h3>
                <div id="mission-update" style="font-size: 1rem; margin-top: 10px;"></div>
            </div>
        </div>

        <div class="game-footer">
            <button id="spin-btn" onclick="startSpin()">SPIN (5 RY≈å)</button>
            <div class="footer-btns">
                <button class="mini-btn" onclick="playSnd('click'); showInstructions()">RULES</button>
                <button class="mini-btn donate-btn" onclick="playSnd('click'); window.open('https://ko-fi.com/tenchu')">DONATE</button>
                <button class="mini-btn" onclick="playSnd('click'); returnToBase()">RETURN TO BASE</button>
            </div>
        </div>
    </div>

    <!-- Particle effects container -->
    <div class="particles" id="particles"></div>

    <!-- Audio elements -->
    <audio id="snd-click" src="sounds/click.mp3"></audio>
    <audio id="snd-spin-start" src="sounds/spin.mp3"></audio>
    <audio id="snd-spinning" src="sounds/spinning.mp3" loop></audio>
    <audio id="snd-stop" src="sounds/stop.mp3"></audio>
    <audio id="snd-win" src="sounds/win.mp3"></audio>
    <audio id="snd-lose" src="sounds/lose.mp3"></audio>
    <audio id="snd-feedback" src="sounds/feedback.mp3"></audio>

    <script src="game.js"></script>
</body>
</html>